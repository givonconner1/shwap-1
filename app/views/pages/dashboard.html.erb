<p id="notice"><%= notice %></p>

<h1><%= current_user.email %>'s Availabilities</h1>
        <%= month_calendar(attribute: :start_time, end_attribute: :end_time, events: @availabilities) do |date, availabilities| %>
  <%= date.to_formatted_s(:short) %>
  <% availabilities.each do |availability| %>
    <% if availability.status == 'Confirmed' %>
          <%= link_to availability do %>
            <p class = "confirmed">
              <%= availability.title %></p>
           <% end %>
       <% elsif availability.status == 'Pending' %>
          <%= link_to availability do %>


          <p class="pending">
            <%= availability.title %></p>
        <% end %>
        <% else %>
          <%= link_to availability do %>


          <p class="not-assigned">
            <%= availability.title %></p>
        <% end %>
      <% end %>
<% end %>
<% end %>


<table>
  <thead>
    <tr>
      <th>Start time</th>
      <th>End time</th>
      <th>Assigned</th>
      <th colspan="3"></th>
    </tr>
  </thead>


  <tbody>
    <% @availabilities.each do |availability| %>
      <tr>
        <td><%= availability.start_time %></td>
        <td><%= availability.end_time %></td>
        <td><%= availability.assigned %></td>
        <td><%= link_to 'Show', availability %></td>
        <td><%= link_to 'Edit', edit_availability_path(availability) %></td>
        <td><%= link_to 'Destroy', availability, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Availability', new_availability_path %>
<script>
$('#calendar').fullCalendar({ 
   events: '/availabilities.json'
});
</script>
